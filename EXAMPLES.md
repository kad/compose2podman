# compose2podman Examples

> **⚠️ CAUTION: Proof-of-Concept Tool**
>
> These examples are for demonstration purposes only. This tool was generated by GitHub Copilot 
> and has NOT been tested with real production workloads. Always verify the generated output 
> matches your requirements before using it.

This directory contains example conversions showing how `compose2podman` transforms Docker Compose files into Podman formats.

## Example 1: Simple Redis Service

### Input (docker-compose.yaml)
```yaml
version: "3"
services:
  redis:
    image: redis:alpine
    ports:
      - "6379:6379"
    restart: always
```

### Kubernetes Output
```bash
compose2podman -input docker-compose.yaml -type kube
```

**Result (pod.yaml):**
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: compose-pod
  labels:
    app: compose2podman
spec:
  containers:
  - name: redis
    image: redis:alpine
    ports:
    - containerPort: 6379
      hostPort: 6379
  restartPolicy: Always
```

**Usage:**
```bash
podman play kube pod.yaml
```

### Quadlet Output
```bash
compose2podman -input docker-compose.yaml -type quadlet -output ./quadlet
```

**Result (redis.container):**
```ini
[Unit]
Description=redis container

[Container]
Image=redis:alpine
ContainerName=redis
PublishPort=6379:6379

[Service]
Restart=always
TimeoutStartSec=900

[Install]
WantedBy=default.target
```

**Installation:**
```bash
# User services
cp quadlet/*.{container,volume,network} ~/.config/containers/systemd/
systemctl --user daemon-reload
systemctl --user start redis.service

# System services
sudo cp quadlet/*.{container,volume,network} /etc/containers/systemd/
sudo systemctl daemon-reload
sudo systemctl start redis.service
```

## Example 2: Multi-Tier Application

See `testdata/docker-compose.yaml` for a complete example with:
- Web server (nginx)
- API server (node)
- Database (postgres)
- Multiple networks
- Persistent volumes
- Service dependencies

### Generate All Formats

```bash
# Kubernetes Pod
compose2podman -input testdata/docker-compose.yaml -type kube -output app.yaml

# Quadlet systemd units
compose2podman -input testdata/docker-compose.yaml -type quadlet -output ./app-quadlet

# Custom pod name
compose2podman -input testdata/docker-compose.yaml -type kube -pod-name my-app -output my-app.yaml
```

## Kubernetes vs Quadlet Comparison

| Feature | Kubernetes (play kube) | Quadlet |
|---------|----------------------|---------|
| **Format** | Single YAML file | Multiple .container, .volume, .network files |
| **Integration** | Podman command | systemd service units |
| **Management** | `podman play kube` | `systemctl` commands |
| **Auto-start** | Manual or via systemd | Native systemd integration |
| **Dependencies** | Limited | Full systemd dependency support |
| **Best for** | Development, testing | Production, system services |

## Tips

### Kubernetes Format
- Easy to share as a single file
- Good for development environments
- Can be version controlled easily
- Works well with `podman generate kube` for round-tripping

### Quadlet Format
- Better for production deployments
- Automatic service management
- Full systemd features (logging, dependencies, resource limits)
- Works with `systemctl` commands users already know
- Services start automatically on boot

## Common Use Cases

### Development
```bash
# Quick local testing
compose2podman -input docker-compose.yaml -type kube
podman play kube pod.yaml
```

### Production Server
```bash
# Deploy as system services
compose2podman -input docker-compose.yaml -type quadlet -output /tmp/app-units
sudo cp /tmp/app-units/* /etc/containers/systemd/
sudo systemctl daemon-reload
sudo systemctl enable --now web.service db.service
```

### CI/CD Integration
```bash
# Generate in CI pipeline
compose2podman -input docker-compose.yaml -type kube -output deployment.yaml
# Deploy to target
scp deployment.yaml server:/app/
ssh server "podman play kube /app/deployment.yaml"
```
